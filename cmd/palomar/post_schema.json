{
"settings": {
    "index": {
        "analysis": {
            "analyzer": {
                "default": {
                    "type": "custom",
                    "tokenizer": "standard",
                    "filter": [ "lowercase", "asciifolding" ]
                },
                "textIcu": {
                    "type": "custom",
                    "tokenizer": "icu_tokenizer",
                    "char_filter": [ "icu_normalizer" ],
                    "filter": [ "icu_folding" ]
                },
                "textIcuSearch": {
                    "type": "custom",
                    "tokenizer": "icu_tokenizer",
                    "char_filter": [ "icu_normalizer" ],
                    "filter": [ "icu_folding" ]
                }
            },
            "normalizer": {
                "default": {
                    "type": "custom",
                    "char_filter": [],
                    "filter": ["lowercase"]
                },
                "caseSensitive": {
                    "type": "custom",
                    "char_filter": [],
                    "filter": []
                }
            }
        }
    }
},
"mappings": {
    "_doc": {
        "properties": {
            "doc_index_ts":   { "type": "date" },
            "did":            { "type": "keyword", "normalizer": "default", "doc_values": false },
            "record_tid":     { "type": "keyword", "normalizer": "default" },
            "handle":         { "type": "keyword", "normalizer": "default" },

            "text":           { "type": "text", "index": true, "analyzer": "textIcu", "search_analyzer":"textIcuSearch", "copy_to": "everything" },
            "created_at":     { "type": "date" },
            "mention_did":    { "type": "keyword", "normalizer": "default", "doc_values": false },
            "mention_handle": { "type": "keyword", "normalizer": "default" },
            "embed_url":      { "type": "keyword", "normalizer": "default" },
            "embed_text":     { "type": "text", "index": true, "analyzer": "textIcu", "search_analyzer":"textIcuSearch" },
            "quote_uri":      { "type": "keyword", "normalizer": "default" },
            "reply_parent_uri": { "type": "keyword", "normalizer": "default" },
            "reply_root_uri": { "type": "keyword", "normalizer": "default" },
            "lang_code":      { "type": "keyword", "normalizer": "default" },
            "lang_code_norm": { "type": "keyword", "normalizer": "default" },
            "img_count":      { "type": "integer" },
            "img_alt_text":   { "type": "text", "index": true, "analyzer": "textIcu", "search_analyzer":"textIcuSearch", "copy_to": "everything" },

            "everything":     { "type": "text", "index": true, "analyzer": "textIcu", "search_analyzer":"textIcuSearch" },

            "author":         { "type": "alias", "path": "handle" },
            "by":             { "type": "alias", "path": "handle" },
            "from":           { "type": "alias", "path": "handle" },
            "lang":           { "type": "alias", "path": "lang_code_norm" },
            "mentions":       { "type": "alias", "path": "mention_handle" }
        }
    }
}
}
